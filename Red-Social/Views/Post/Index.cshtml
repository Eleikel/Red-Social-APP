@using Red_Social.Core.Application.ViewModels.Post;
@model SavePostViewModel
@{
    //bool editMode = Model.Id == 0 ? false : true;
    //ViewData["Title"] = "Post";

    //SavePostViewModel PostVm = new();
}


<div class="container-fluid">

    @*    <div class="row mb-3">
        <div class="col-3 offset-9">
        <a asp-controller="Post" asp-action="Create" class="btn btn-outline-success">Agregar un Post</a>
        </div>
        </div>
    *@



    <form method="post" asp-controller="Post" asp-action="Create" enctype="multipart/form-data" class="mb-6">
        @Html.ValidationSummary(false, "",new {@class = "text-danger"})


        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Upload</span>
            </div>
            <div class="custom-file">
                <input asp-for="@Model.File" name="File" class="custom-file-input" id="inputGroupFile01" />
                <label asp-for="@Model.File" name="File" class="custom-file-label">Seleccione un archivo:</label>
                <span asp-validation-for="@Model.File" name="File" class="text-danger"></span>
            </div>
        </div>


        <div class="form-group shadow-textarea">
            <label asp-for="@Model.Text" name="Text for="exampleFormControlTextarea6">Añade tu comentario:</label>
            <textarea asp-for="@Model.Text" name="Text" class="form-control z-depth-1" id="exampleFormControlTextarea6" rows="3" placeholder="" What's Happening?"></textarea>
            <span asp-validation-for="@Model.Text" name="Text" class="text-danger"></span>

        </div>

        <input type="hidden" asp-for="@Model.Id" name="Id" />

        <button type="submit" class="btn btn-primary mb-6">Publicar</button>

    </form>



    <div class="row">

        @foreach (PostViewModel item in ViewBag.Posts)
        {
            <div class="col-md-8 mt-6">
                <div class="card flex-md-row mb-4 box-shadow h-md-250">
                    <div class="card-body d-flex flex-column align-items-start">
                        <div class="d-flex  align-items-start">
                            <img src="@item.UserPhoto" alt="..." class="rounded-circle" style="width: 40px; height: 40px;">
                            <strong class="d-inline-block mb-2 text-primary h5">User:  @item.UserName</strong>
                        </div>

                        <div class="d-flex align-items-end flex-column">
                            <!--Boton Opciones-->
                        <div class="dropdown">
                                <a class="btn btn-dark dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Opciones
                                </a>

                                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                    <a asp-controller="Post" asp-action="Edit" asp-route-id="@item.Id" class="dropdown-item">Editar</a>
                                    <a asp-controller="Post" asp-action="Delete" asp-route-id="@item.Id" class="dropdown-item">Borrar</a>
                                </div>
                            </div>
                        </div>
                        <!--Descripcion del Post-->

                    <p class="card-text mb-auto h4 mt-2 mb-4">@item.Text</p>
                        <img class="card-img-right flex-auto d-none d-md-block" src="@item.ImageUrl" style="width: 564px; height: 434px;" data-holder-rendered="true">
                        <div class="mb-1 text-muted">@item.Created</div>

                        <!--Boton Comentar-->
                        @*                            <form method="post" asp-controller="¨Post" asp-action="Comment">

                            <div class="mb-3">
                            <input asp-for="@item.Comments" asp-action="Comment" class="form-control form-control-sm" type="text" placeholder="agrega un comentario" aria-label=".form-control-sm example">
                            <button type="submit" class="btn btn-primary">Guardar</button>
                            </div>
                            </form>
                        *@


                        <a asp-controller="Comment" asp-action="Create" asp-route-id="@item.Id" class="dropdown-item">Comentar</a>

                        @*                     <div class="d-flex w-100">
                            <button type="button" class="btn btn-secondary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                            <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"></path>
                            </svg>
                            </button>
                            </div>*@

                    </div>
                </div>
            </div>
        }




        @*       }*@
    </div>

</div>